{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/cathychen/Desktop/WebProgramming/NTU-WebProgramming-FinalProject/love_diary/src/components/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport CryptoJs from 'crypto-js';\nimport SignUpButton from './SignUpButton';\nimport moment from 'moment';\nimport Fade from '@material-ui/core/Fade';\nimport \"./Login.css\";\nimport axios from 'axios';\nconst API_ROOT = 'http://localhost:4000/api';\nconst instance = axios.create({\n  baseURL: API_ROOT\n});\n\nfunction Login({\n  loginSuccess\n}) {\n  _s();\n\n  const [myAccount, setAccount] = useState(\"\");\n  const [myPassword, setPassword] = useState(\"\"); //const[allAccounts, setAllAccounts] = useState([]);\n  //const[updateAccounts, setUpdateAccounts] = useState(0);\n\n  const [initAcc, setInitAcc] = useState(null);\n\n  const addAccount = async (acc, pw, name1, name2, date) => {\n    var newAcc = {\n      account: acc,\n      password: pw,\n      name1: name1,\n      name2: name2,\n      date: date\n    };\n    const {\n      data: {\n        message\n      }\n    } = await instance.post('/addAccount', {\n      params: newAcc\n    });\n\n    if (message === \"success\") {\n      setInitAcc(newAcc);\n    }\n\n    return message;\n  };\n\n  const handleSubmit = async () => {\n    if (myAccount === \"\" || myPassword === \"\") {\n      alert(\"Please enter your Account Name and Password\");\n    } else {\n      const pwd = CryptoJs.MD5(myPassword).toString();\n      const {\n        data: {\n          message,\n          myAcc\n        }\n      } = await instance.get('/confirmAccount', {\n        params: {\n          myAccount,\n          pwd\n        }\n      });\n\n      if (message === \"error\") {\n        alert(\"Your Account Name or Password is wrong!\");\n      } else {\n        loginSuccess(myAcc._id, myAcc.name1, myAcc.name2, myAcc.date);\n      }\n    }\n  };\n\n  const initAccount = async () => {\n    if (initAcc !== null) {\n      var acc = initAcc.account;\n      const {\n        data: {\n          accountId\n        }\n      } = await instance.get('/findAccount', {\n        params: {\n          acc\n        }\n      }); //console.log(accountId);\n\n      const end = moment(initAcc.date).add(1, \"days\").format(\"YYYY-MM-DD\");\n      var event = {\n        accountId: accountId,\n        title: \"First Day\",\n        favorite: true,\n        todo: false,\n        start: initAcc.date,\n        end: end,\n        textColor: \"white\",\n        backgroundColor: \"#F6919D\",\n        borderColor: \"#F6919D\"\n      };\n      const {\n        data: {\n          message\n        }\n      } = await instance.post('/addFirstEvent', {\n        params: {\n          event\n        }\n      });\n      if (message === \"error\") console.log(\"initAccount error\");\n    }\n  };\n\n  useEffect(() => {\n    initAccount();\n  }, [initAcc]);\n  return /*#__PURE__*/_jsxDEV(Fade, {\n    in: true,\n    ...{\n      timeout: 1500\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"closedBook\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"login_title\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"acc_pas\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"account\",\n            className: \"account\",\n            children: \"Account : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"account\",\n            id: \"account\",\n            className: \"login_type\",\n            value: myAccount,\n            onChange: e => setAccount(e.target.value),\n            placeholder: \"Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"password\",\n            children: \"Password : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            id: \"password\",\n            className: \"login_type\",\n            value: myPassword,\n            onChange: e => setPassword(e.target.value),\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmit,\n          type: \"button\",\n          className: \"open\",\n          children: \"Open\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(SignUpButton, {\n          addAccount: addAccount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"BF4sBA7rEyXCpE9s3UCUb1/yETU=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/cathychen/Desktop/WebProgramming/NTU-WebProgramming-FinalProject/love_diary/src/components/Login/Login.js"],"names":["React","useState","useEffect","CryptoJs","SignUpButton","moment","Fade","axios","API_ROOT","instance","create","baseURL","Login","loginSuccess","myAccount","setAccount","myPassword","setPassword","initAcc","setInitAcc","addAccount","acc","pw","name1","name2","date","newAcc","account","password","data","message","post","params","handleSubmit","alert","pwd","MD5","toString","myAcc","get","_id","initAccount","accountId","end","add","format","event","title","favorite","todo","start","textColor","backgroundColor","borderColor","console","log","timeout","e","target","value"],"mappings":"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","sourcesContent":["import React , { useState, useEffect }from \"react\";\nimport CryptoJs from 'crypto-js';\nimport SignUpButton from './SignUpButton'\nimport moment from 'moment';\nimport Fade from '@material-ui/core/Fade';\nimport \"./Login.css\"\n\nimport axios from 'axios'\n\nconst API_ROOT = 'http://localhost:4000/api'\nconst instance = axios.create({\n  baseURL: API_ROOT\n})\n\nfunction Login({loginSuccess}){\n    const[myAccount, setAccount] = useState(\"\");\n    const[myPassword, setPassword] = useState(\"\");\n    //const[allAccounts, setAllAccounts] = useState([]);\n    //const[updateAccounts, setUpdateAccounts] = useState(0);\n    const[initAcc, setInitAcc] = useState(null);\n    \n    const addAccount = async(acc, pw, name1, name2, date) =>{\n        var newAcc = {\n            account: acc,\n            password: pw,\n            name1: name1,\n            name2: name2,\n            date: date\n        } \n        const {\n            data: { message}\n        } = await instance.post('/addAccount', { params: newAcc });\n        \n        if(message === \"success\" ){\n            setInitAcc(newAcc);\n        }\n        return message;\n    }\n\n    const handleSubmit = async() => {\n        if(myAccount === \"\" || myPassword === \"\"){\n            alert(\"Please enter your Account Name and Password\")\n        }else{\n            const pwd = CryptoJs.MD5(myPassword).toString();           \n            const {\n                data: { message, myAcc}\n            } = await instance.get('/confirmAccount', {params:{myAccount, pwd}})\n            if(message===\"error\"){\n                alert(\"Your Account Name or Password is wrong!\");\n            }else{\n                loginSuccess(myAcc._id, myAcc.name1, myAcc.name2, myAcc.date);\n            }\n        }\n    }\n\n    const initAccount = async()=>{\n        if(initAcc !== null){\n            var acc = initAcc.account;\n            const {\n                data: { accountId}\n            } = await instance.get('/findAccount', { params: {acc} });\n            //console.log(accountId);\n            const end = moment(initAcc.date).add(1,\"days\").format(\"YYYY-MM-DD\");\n            var event = {\n                accountId:accountId, \n                title: \"First Day\",\n                favorite: true,\n                todo: false,\n                start: initAcc.date,\n                end: end,\n                textColor: \"white\",\n                backgroundColor:\"#F6919D\",\n                borderColor:\"#F6919D\"\n            }\n            const {\n                data: { message }\n            } = await instance.post('/addFirstEvent', { params: { event } });\n            if(message===\"error\") console.log(\"initAccount error\");\n        }\n    }\n\n    useEffect(()=>{\n        initAccount();\n    },[initAcc]);\n    \n    return(\n        <Fade in={true} {...({ timeout: 1500 } )}>\n        <div className=\"closedBook\">\n            <p className=\"login_title\">Login</p>\n            <form>\n                <div className=\"acc_pas\">\n                    <label htmlFor=\"account\" className=\"account\">Account : </label>\n                    <input type=\"text\" name=\"account\" id=\"account\" className=\"login_type\"\n                        value={myAccount}\n                        onChange={(e) => setAccount(e.target.value)}\n                        placeholder=\"Account\"\n                    ></input>\n                    <p></p>\n                    <label htmlFor=\"password\" className=\"password\">Password : </label>\n                    <input type=\"password\" name=\"password\" id=\"password\" className=\"login_type\"\n                        value={myPassword}\n                        onChange={(e) => setPassword(e.target.value)}\n                        placeholder=\"Password\"\n                    ></input>\n                </div>\n                <button onClick={handleSubmit} type=\"button\" className=\"open\" >Open</button>\n                <SignUpButton addAccount={addAccount}></SignUpButton>\n            </form>\n        </div>\n        </Fade>\n    )\n    \n}\nexport default Login;\n\n"]},"metadata":{},"sourceType":"module"}